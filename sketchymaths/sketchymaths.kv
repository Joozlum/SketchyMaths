#:kivy 1.11.1

#:import gt sketchymaths.internalsketch.text_loader

SketchyScreens:
    id: main_screens

<SketchyScreens>:
    SketchyMain:
        id: sketchy_main
    SketchyGuide:
    SketchyLoad:
    SketchySave:

<EquationEditor>:
    height: 40
    font_size: 20
    size_hint_y: None
    multiline: False

<EquationLabel>:

<GenericLabel>:
    font_size: 18
    text_size: self.size
    padding_x: 20

<labelsavename>:
    text_size: self.size
    valign: 'bottom'
    padding: 20, 20

<EquationScatter>:
    size_hint: None, None
    size: label_equation.size

#  for debugging appearance
#    canvas.after:
#        Color:
#            rgba: 0, 1, 0, 0.2
#        Rectangle:
#            pos: self.pos
#            size: self.size
    EquationLabel:
        id: label_equation
        text: root.text
        markup: True
        font_size: 20
        size: self.texture_size


<BlackBoard>:
    text: 'BlackBoard'
    id: blackboard


<SketchyMath>:
    text: 'SketchyMath'
    orientation: 'vertical'
    text: 'BoxLayout'

<SketchyMain>:
    name: 'main'
    sketchy_maths: sketchy_maths
    BoxLayout:
        orientation: 'vertical'
        SketchyMath:
            name: 'maths'
            id: sketchy_maths

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 25 / root.height
            Button:
                text: 'Guide'
                font_size: 20
                on_release: app.root.current = 'guide'
            Button:
                text: 'Save'
                font_size: 20
                on_release: app.root.current = 'save'
            Button:
                text: 'Load'
                font_size: 20
                on_release: app.root.current = 'load'
            Button:
                text: 'Clear'
                font_size: 20
                on_release:
                    root.sketchy_maths.load_function(data=None)
            Button:
                text: 'Quit'
                font_size: 20
                on_release: app.stop()

<SketchyLoad>:
    name: 'load'

<SketchySave>
    name: 'save'

<SketchyGuide>:
    name: 'guide'
    BoxLayout:
        orientation: 'vertical'
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            Label:
                id: guide_label
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                padding: 10, 10
                markup: True
                font_size: 20
                text: gt.guide_text
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: .1
            Button:
                text: 'Guide'
                on_release: guide_label.text = gt.guide_text
            Button:
                text: 'Shortcuts'
                on_release: guide_label.text = gt.methods_text
            Button:
                text: 'Return'
                on_release: app.root.current = 'main'

